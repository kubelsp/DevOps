<!doctype html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta charset='US-ASCII'>
    <meta name='viewport' content='width=device-width initial-scale=1'>

    <!-- new add -->
    <title>WebTerminal</title>
    <link rel="stylesheet" href="./node_modules/xterm/css/xterm.css"/>
    <script src="./node_modules/xterm/lib/xterm.js"></script>
    <!-- new add -->

    <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext'
          rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="./main.css"/>

    <style type='text/css'>
        /* new add */
        #terminal {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: calc(50% - 10px); /* 宽度为屏幕宽度的一半 */
            height: 100%; /* 高度自适应屏幕 */
            border: 1px solid black;
            padding: 10px;
            margin: 0;
        }

        .click-exec {
            display: none;
            color: #FF359A; /* 文本颜色为粉色 */
            margin-left: 20px; /* 左边距 */
        }

        .click-exec {
            background-color: #FF359A;
            border: 1px solid transparent;
            border-radius: 3px;
            box-shadow: rgba(255, 255, 255, .4) 0 1px 0 0 inset;
            box-sizing: border-box;
            color: #fff;
            cursor: pointer;
            display: inline-block;
            font-family: -apple-system, system-ui, "Segoe UI", "Liberation Sans", sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 1.15385;
            margin: 0;
            outline: none;
            padding: 8px .8em;
            position: relative;
            text-align: center;
            text-decoration: none;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            vertical-align: baseline;
            white-space: nowrap;
        }

        .click-exec:hover,
        .click-exec:focus {
            background-color: #FDA7DF;
        }

        .click-exec:focus {
            box-shadow: 0 0 0 4px rgba(0, 149, 255, .15);
        }

        .click-exec:active {
            background-color: #FF359A;
            box-shadow: none;
        }

        /* new add */


</style><title></title>
</head>
<div>
    <input type="text" id="username" placeholder="Username">
    <input type="text" id="ip" placeholder="IP Address">
    <button onclick="connect()">Connect</button>
</div>
<body class='typora-export'>
<div class='typora-export-content'>
    <div id='write' class=''><h3 id='13prometheus--grafana'><span>13、prometheus + grafana</span></h3>
        <p><span>k8s 手撕方式安装 prometheus + grafana</span></p>
        <p><span>1、k8s 手撕方式安装 prometheus</span></p>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div
                class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div
                style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div
                class="CodeMirror-activeline" style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">mkdir</span> <span class="cm-attribute">-p</span> ~/prometheus-yml</span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                   style="padding-right: 0.1px;">kubectl create ns monitoring</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[0].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/prometheus-rbac.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: ServiceAccount</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span
                class="cm-attribute">---</span></span></pre></div><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;">apiVersion: rbac.authorization.k8s.io/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: ClusterRole</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">rules:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">-</span> apiGroups: [<span class="cm-string">""</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> nodes</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">-</span> nodes/metrics</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> services</span></pre><pre class=" CodeMirror-line "
                                                                        role="presentation"><span role="presentation"
                                                                                                  style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> endpoints</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> pods</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  verbs: [<span class="cm-string">"get"</span>, <span
                class="cm-string">"list"</span>, <span class="cm-string">"watch"</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">-</span> apiGroups: [<span class="cm-string">""</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> configmaps</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  verbs: [<span class="cm-string">"get"</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">-</span> apiGroups:</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">-</span> networking.k8s.io</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> ingresses</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">  verbs: [<span
                class="cm-string">"get"</span>, <span class="cm-string">"list"</span>, <span
                class="cm-string">"watch"</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">-</span> nonResourceURLs: [<span
                class="cm-string">"/metrics"</span>]</span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">  verbs: [<span
                class="cm-string">"get"</span>]</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">---</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">apiVersion: rbac.authorization.k8s.io/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: ClusterRoleBinding</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">roleRef:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  apiGroup: rbac.authorization.k8s.io</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  kind: ClusterRole</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">subjects:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">-</span> kind: ServiceAccount</span></pre><pre class=" CodeMirror-line "
                                                                                    role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  name: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 990px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 990px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[1].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/prometheus-rbac.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[2].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/prometheus-ConfigMap.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: v1</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">kind: ConfigMap</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus-config</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">data:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  prometheus.yml: |</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    global:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      scrape_interval: 15s</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      evaluation_interval: 15s</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    scrape_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: prometheus</span></pre><pre class=" CodeMirror-line "
                                                                                    role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span class="cm-string">'localhost:9090'</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 352px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 352px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[3].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/prometheus-ConfigMap.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[4].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <blockquote><p><span>这里暂时只配置了对 prometheus 本身的监控</span></p>
            <p><span>如果以后有新的资源需要被监控，只需要将 ConfigMap 对象更新即可</span></p></blockquote>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/prometheus-ConfigMap.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: ConfigMap</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">metadata:</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus-config</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">data:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  prometheus.yml: |</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    global:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      scrape_interval: 15s</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      evaluation_interval: 15s</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    scrape_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#0、监控 prometheus</span></span></pre><pre class=" CodeMirror-line "
                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: prometheus</span></pre><pre class=" CodeMirror-line "
                                                                                    role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span class="cm-string">'localhost:9090'</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.203</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.203:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.204</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.204:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.205</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.205:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.207</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.207:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.200</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.200:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.240</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.240:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.233</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.233:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.232</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.232:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.235</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.235:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.230</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.230:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.231</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.231:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.234</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.243:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.236</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.236:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.206</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.206:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.246</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.246:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.213</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.213:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.214</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.214:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.215</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.215:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.216</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.216:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.217</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.217:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.218</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.218:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.44</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span class="cm-string">'192.168.1.44:9100'</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.112</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.112:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.106</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.106:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.113</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.113:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-number">192</span>.169.1.219</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span
                class="cm-string">'192.168.1.219:9100'</span>]</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#1、监控 k8s节点</span></span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-string">'k8s-nodes'</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: <span class="cm-builtin">node</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__address__]</span></pre><pre class=" CodeMirror-line "
                                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          regex: <span
                class="cm-string">'(.*):10250'</span></span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;">          replacement: <span
                class="cm-string">'${1}:9100'</span></span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">          target_label: __address__</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> action: labelmap</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          regex: __meta_kubernetes_node_label_(.<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#2、监控 etcd</span></span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#3、监控 kube-apiserver-master</span></span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-string">'k8s-apiserver'</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: endpoints</span></pre><pre class=" CodeMirror-line "
                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        scheme: https</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        tls_config:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: keep</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: default;kubernetes;https</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#4、监控 kube-controller-manager-master</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span
                class="cm-string">'k8s-controller-manager'</span></span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: endpoints</span></pre><pre class=" CodeMirror-line "
                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        scheme: https</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        tls_config:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          insecure_skip_verify: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: keep</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: kube-system;kube-controller-manager</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#5、监控 kube-scheduler-master</span></span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span
                class="cm-string">'kube-scheduler-master'</span></span></pre><pre class=" CodeMirror-line "
                                                                                  role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: endpoints</span></pre><pre class=" CodeMirror-line "
                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        scheme: https</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        tls_config:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          insecure_skip_verify: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: keep</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: kube-system;kube-scheduler</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#6、监控 kubelet</span></span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-string">'kubelet'</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: <span class="cm-builtin">node</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        scheme: https</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        tls_config:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          insecure_skip_verify: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> action: labelmap</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          regex: __meta_kubernetes_node_label_(.<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          replacement: <span
                class="cm-def">$1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#7、监控 coredns</span></span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span class="cm-string">'coredns'</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        static_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> targets: [<span class="cm-string">'kube-dns.kube-system.svc.cluster.local:9153'</span>]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#8、监控容器</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span
                class="cm-string">'kubernetes-cadvisor'</span></span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: <span class="cm-builtin">node</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        scheme: https</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        tls_config:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          ca_file: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          insecure_skip_verify: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> action: labelmap</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          regex: __meta_kubernetes_node_label_(.<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          replacement: <span
                class="cm-def">$1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_node_name]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: (.<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          replacement: /metrics/cadvisor</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: __metrics_path__</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">      <span
                class="cm-comment">#9、svc自动发现</span></span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> job_name: <span
                class="cm-string">'k8s-service-endpoints'</span></span></pre><pre class=" CodeMirror-line "
                                                                                  role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        kubernetes_sd_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> role: endpoints</span></pre><pre class=" CodeMirror-line "
                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        relabel_configs:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scrape]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: keep</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_service_annotation_prometheus_io_scheme]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: __scheme__</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: (https?)</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_service_annotation_prometheus_io_path]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: __metrics_path__</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: (.<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__address__, __meta_kubernetes_service_annotation_prometheus_io_port]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: __address__</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          regex: ([^:]<span
                class="cm-operator">+</span>)(?::\d<span class="cm-operator">+</span>)?;(\d<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          replacement: <span
                class="cm-def">$1</span>:<span class="cm-def">$2</span></span></pre><pre class=" CodeMirror-line "
                                                                                         role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> action: labelmap</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          regex: __meta_kubernetes_service_label_(.<span
                class="cm-operator">+</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_namespace]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: kubernetes_namespace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_service_name]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: kubernetes_name</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> source_labels: [__meta_kubernetes_pod_name]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          action: replace</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          target_label: kubernetes_pod_name</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 5368px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 5368px;"></div></div></div></pre>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/prometheus-Deployment.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: apps/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: Deployment</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    app: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  replicas: <span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  selector:</span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    matchLabels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">     app: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  template:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        app: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      serviceAccountName: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      containers:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: prometheus</span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        image: prom/prometheus:v2.46.0</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        imagePullPolicy: IfNotPresent</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        args:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span
                class="cm-string">"--config.file=/etc/prometheus/prometheus.yml"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span
                class="cm-string">"--storage.tsdb.path=/prometheus"</span></span></pre><pre class=" CodeMirror-line "
                                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-string">"--storage.tsdb.retention.time=30d"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-string">"--web.enable-admin-api"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-string">"--web.enable-lifecycle"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        ports:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> containerPort: <span class="cm-number">9090</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          name: http</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        volumeMounts:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> mountPath: <span class="cm-string">"/prometheus"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          subPath: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          name: data</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> mountPath: <span class="cm-string">"/etc/prometheus"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          name: config</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          limits:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            cpu: <span
                class="cm-string">"2"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            memory: <span
                class="cm-string">"4Gi"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          requests:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            cpu: <span
                class="cm-string">"1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            memory: <span
                class="cm-string">"2Gi"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      volumes:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: data</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        persistentVolumeClaim:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          claimName: prometheus-nfs-client-pvc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: config</span></pre><pre class=" CodeMirror-line "
                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        configMap:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          name: prometheus-config</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind:  PersistentVolumeClaim</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus-nfs-client-pvc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  storageClassName: nfs-storage</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  accessModes: [ReadWriteOnce]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    requests:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      storage: 2Ti</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1430px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 1430px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[6].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/prometheus-Deployment.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[7].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/prometheus-Service.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: Service</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  name: prometheus-service</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    app: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  annotations:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    prometheus.io/port: <span
                class="cm-string">"9090"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    prometheus.io/scrape: <span
                class="cm-string">"true"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre class=" CodeMirror-line "
                                                                                         role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  selector:</span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    app: prometheus</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  type: NodePort</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ports:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> name: web</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">    port: <span
                class="cm-number">9090</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    targetPort: http</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    nodePort: <span
                class="cm-number">31111</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 462px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 462px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[8].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/prometheus-Service.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[9].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/prometheus-Ingress.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: networking.k8s.io/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: Ingress</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: prometheus-ingress</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  annotations:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    nginx.ingress.kubernetes.io/ssl-redirect: <span
                class="cm-string">'true'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    nginx.ingress.kubernetes.io/proxy-body-size: <span
                class="cm-string">'4G'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre class=" CodeMirror-line "
                                                                                         role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  ingressClassName: nginx</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  rules:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> host: prometheus.huanghuanhui.cloud</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    http:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      paths:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> path: /</span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;">        pathType: Prefix</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        backend:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-builtin">service</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            name: prometheus-service</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            port:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              number: <span
                class="cm-number">9090</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">  tls:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> hosts:</span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">    <span
                class="cm-attribute">-</span> prometheus.huanghuanhui.cloud</span></pre><pre class=" CodeMirror-line "
                                                                                             role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">    secretName: prometheus-ingress-tls</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 616px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 616px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[10].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl create secret <span
                class="cm-attribute">-n</span> monitoring \</span></pre></div><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">tls prometheus-ingress-tls \</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">--key</span><span class="cm-operator">=</span>/root/ssl/huanghuanhui.cloud_nginx/huanghuanhui.cloud.key \</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">--cert</span><span
                class="cm-operator">=</span>/root/ssl/huanghuanhui.cloud_nginx/huanghuanhui.cloud_bundle.crt</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[11].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/prometheus-Ingress.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[12].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <blockquote><p><span>访问地址：prometheus.huanghuanhui.cloud</span></p></blockquote>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/node-exporter.yml &lt;&lt; <span class="cm-string">'EOF'</span></span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">apiVersion: apps/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: DaemonSet</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: node-exporter</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    app: node-exporter</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  selector:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    matchLabels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      app: node-exporter</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  template:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        app: node-exporter</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      hostPID: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      hostIPC: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      hostNetwork: <span class="cm-atom">true</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      nodeSelector:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        kubernetes.io/os: linux</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      containers:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: node-exporter</span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        image: prom/node-exporter:v1.6.0</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        args:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-attribute">--web</span><span class="cm-def">.listen-address</span><span
                class="cm-operator">=</span><span class="cm-quote">$(HOSTIP)</span>:9100</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-attribute">--path</span><span
                class="cm-def">.procfs</span><span class="cm-operator">=</span>/host/proc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-attribute">--path</span><span class="cm-def">.sysfs</span><span
                class="cm-operator">=</span>/host/sys</span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-attribute">--path</span><span
                class="cm-def">.rootfs</span><span class="cm-operator">=</span>/host/root</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-attribute">--collector</span>.filesystem<span
                class="cm-def">.ignored-mount-points</span><span class="cm-operator">=</span>^/(dev|proc|sys|var/lib/docker/.<span
                class="cm-operator">+</span>)(<span class="cm-def">$|</span>/)</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> <span class="cm-attribute">--collector</span>.filesystem<span
                class="cm-def">.ignored-fs-types</span><span class="cm-operator">=</span>^(autofs|binfmt_misc|cgroup|configfs|debugfs|devpts|devtmpfs|fusectl|hugetlbfs|mqueue|overlay|proc|procfs|pstore|rpc_pipefs|securityfs|sysfs|tracefs)<span
                class="cm-def">$</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        ports:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> containerPort: <span class="cm-number">9100</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        env:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: HOSTIP</span></pre><pre class=" CodeMirror-line "
                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          valueFrom:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            fieldRef:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              fieldPath: status.hostIP</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          requests:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            cpu: 150m</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            memory: 180Mi</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          limits:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            cpu: 150m</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            memory: 180Mi</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        securityContext:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          runAsNonRoot: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          runAsUser: <span
                class="cm-number">65534</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        volumeMounts:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: proc</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">          mountPath: /host/proc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: sys</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">          mountPath: /host/sys</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: root</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">          mountPath: /host/root</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          mountPropagation: HostToContainer</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          readOnly: <span
                class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">      tolerations:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> operator: <span class="cm-string">"Exists"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      volumes:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: proc</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">        hostPath:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          path: /proc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: dev</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">        hostPath:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          path: /dev</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: sys</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">        hostPath:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          path: /sys</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> name: root</span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        hostPath:</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          path: /</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1694px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 1694px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[13].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <p><span>2、k8s 手撕方式安装 grafana</span></p>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/grafana-ConfigMap.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: ConfigMap</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  name: grafana-config</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">data:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  grafana.ini: |</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    [smtp]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    enabled <span
                class="cm-operator">=</span> <span class="cm-atom">false</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    host <span
                class="cm-operator">=</span> localhost:25</span></pre><pre class=" CodeMirror-line "
                                                                           role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;">    user <span
                class="cm-operator">=</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    password <span
                class="cm-operator">=</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    skip_verify <span
                class="cm-operator">=</span> <span class="cm-atom">false</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    from_address <span
                class="cm-operator">=</span> admin@grafana.localhost</span></pre><pre class=" CodeMirror-line "
                                                                                      role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    from_name <span class="cm-operator">=</span> Grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    [alerting]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    enabled <span
                class="cm-operator">=</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    execute_alerts <span
                class="cm-operator">=</span> <span class="cm-atom">true</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 440px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 440px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[14].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/grafana-ConfigMap.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[15].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/grafana-Deployment.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: apps/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: Deployment</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  name: grafana</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    app: grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  selector:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    matchLabels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      app: grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  template:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        app: grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      securityContext:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        fsGroup: <span
                class="cm-number">472</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">        supplementalGroups:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> <span class="cm-number">0</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      containers:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: grafana</span></pre><pre class=" CodeMirror-line "
                                                                             role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          image: grafana/grafana:10.0.3</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          imagePullPolicy: IfNotPresent</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          ports:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> containerPort: <span class="cm-number">3000</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            name: http-grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            protocol: TCP</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          env:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> name: TZ</span></pre><pre class=" CodeMirror-line "
                                                                        role="presentation"><span role="presentation"
                                                                                                  style="padding-right: 0.1px;">            value: Asia/Shanghai</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> name: GF_SECURITY_ADMIN_USER</span></pre><pre class=" CodeMirror-line "
                                                                                            role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">            value: admin</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-attribute">-</span> name: GF_SECURITY_ADMIN_PASSWORD</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            value: Admin@2023</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          readinessProbe:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            failureThreshold: <span
                class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">            httpGet:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              path: /robots.txt</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              port: <span
                class="cm-number">3000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">              scheme: HTTP</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            initialDelaySeconds: <span
                class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">            periodSeconds: <span
                class="cm-number">30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            successThreshold: <span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">            timeoutSeconds: <span
                class="cm-number">2</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">          livenessProbe:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            failureThreshold: <span
                class="cm-number">3</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            initialDelaySeconds: <span
                class="cm-number">30</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">            periodSeconds: <span
                class="cm-number">10</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            successThreshold: <span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            tcpSocket:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              port: <span
                class="cm-number">3000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">            timeoutSeconds: <span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            limits:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              cpu: <span
                class="cm-string">"1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">              memory: <span
                class="cm-string">"2Gi"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            requests:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              cpu: <span
                class="cm-string">"0.5"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">              memory: <span
                class="cm-string">"1Gi"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">          volumeMounts:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span
                class="cm-attribute">-</span> mountPath: /var/lib/grafana</span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">              name: grafana-data</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            <span
                class="cm-attribute">-</span> mountPath: /etc/grafana</span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">              name: config</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      volumes:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: grafana-data</span></pre><pre class=" CodeMirror-line "
                                                                                  role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">          persistentVolumeClaim:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            claimName: grafana-nfs-client-pvc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span
                class="cm-attribute">-</span> name: config</span></pre><pre class=" CodeMirror-line "
                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">          configMap:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            name: grafana-config</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind:  PersistentVolumeClaim</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: grafana-nfs-client-pvc</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  storageClassName: nfs-storage</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  accessModes: [ReadWriteOnce]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  resources:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    requests:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      storage: 2Ti</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">apiVersion: v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: Service</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  name: grafana-service</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  labels:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    app: grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  type: NodePort</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ports:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> nodePort: <span class="cm-number">31300</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    port: <span
                class="cm-number">3000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  selector:</span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    app: grafana</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 2222px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 2222px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[16].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/grafana-Deployment.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[17].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; ~/prometheus-yml/grafana-Ingress.yml &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">apiVersion: networking.k8s.io/v1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kind: Ingress</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">metadata:</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  name: grafana-ingress</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  namespace: monitoring</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  annotations:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    nginx.ingress.kubernetes.io/ssl-redirect: <span
                class="cm-string">'true'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    nginx.ingress.kubernetes.io/proxy-body-size: <span
                class="cm-string">'4G'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">spec:</span></pre><pre class=" CodeMirror-line "
                                                                                         role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  ingressClassName: nginx</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  rules:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> host: grafana.huanghuanhui.cloud</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    http:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      paths:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span
                class="cm-attribute">-</span> path: /</span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;">        pathType: Prefix</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        backend:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span
                class="cm-builtin">service</span>:</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">            name: grafana-service</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">            port:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">              number: <span
                class="cm-number">3000</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">  tls:</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-attribute">-</span> hosts:</span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">    <span
                class="cm-attribute">-</span> grafana.huanghuanhui.cloud</span></pre><pre class=" CodeMirror-line "
                                                                                          role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">    secretName: grafana-ingress-tls</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 616px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 616px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[18].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl create secret <span
                class="cm-attribute">-n</span> monitoring \</span></pre></div><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">tls grafana-ingress-tls \</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">--key</span><span class="cm-operator">=</span>/root/ssl/huanghuanhui.cloud_nginx/huanghuanhui.cloud.key \</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-attribute">--cert</span><span class="cm-operator">=</span>/root/ssl/huanghuanhui.cloud_nginx/huanghuanhui.cloud_bundle.crt</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[19].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/prometheus-yml/grafana-Ingress.yml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[20].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <blockquote><p><span>访问地址：prometheus.huanghuanhui.cloud</span></p>
            <p><span>账号密码：admin、Admin@2023</span></p></blockquote>
    </div>
</div>


<!-- 添加更多按钮 -->
</p >
<div id="terminal"></div> <!-- 用于显示xterm.js终端的元素 -->

<script>
    const term = new Terminal({
        cursorBlink: true, // 光标闪烁
        rows: parseInt(50),
        cols: parseInt(150),
    });

    term.open(document.querySelector('#terminal')); // 挂载

    const socket = new WebSocket(`ws://127.0.0.1:22333/webterminal`); // 创建WebSocket连接

    term.onData((data) => { // 网页xterm窗口中有输入的数据
        socket.send(data); // 通过WebSocket发送给服务器
    });

    socket.onmessage = (event) => { // 收到来自服务器的WebSocket消息
        term.write(event.data); // 向xterm对象写入数据
    };

    function sendMessage(message) {

        message += '\r'; // 添加回车符
        socket.send(message); // 发送命令
    }


  function connect() {
      var usernameInput = document.getElementById("username");
      var ipInput = document.getElementById("ip");
      var username = usernameInput.value;
      var ip = ipInput.value;
      var connectMsg = JSON.stringify({
          "username": username,
          "ip": ip
      });
      socket.send(connectMsg);
  }

    // 显示按钮下方的提示(鼠标悬停时显示)
    function showExecTip(button) {
        const execTip = button.nextElementSibling;
        execTip.style.display = 'inline';
    }

    // 隐藏按钮下方的提示(鼠标移开时隐藏)
    function hideExecTip(button) {
        const execTip = button.nextElementSibling;
        execTip.style.display = 'none';
    }

    // 执行命令并显示提示
    function executeCommand(button, command) {
        console.log(command)
        sendMessage(command);
        showExecTip(button);
    }
</script>
</body>

</html>
