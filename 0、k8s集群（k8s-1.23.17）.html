<!doctype html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta charset='US-ASCII'>
    <meta name='viewport' content='width=device-width initial-scale=1'>

    <!-- new add -->
    <title>WebTerminal</title>
    <link rel="stylesheet" href="./node_modules/xterm/css/xterm.css"/>
    <script src="./node_modules/xterm/lib/xterm.js"></script>
    <!-- new add -->

    <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext'
          rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="./main.css"/>

    <style type='text/css'>
        /* new add */
        #terminal {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: calc(50% - 10px); /* 宽度为屏幕宽度的一半 */
            height: 100%; /* 高度自适应屏幕 */
            border: 1px solid black;
            padding: 10px;
            margin: 0;
        }

        .click-exec {
            display: none;
            color: #FF359A; /* 文本颜色为粉色 */
            margin-left: 20px; /* 左边距 */
        }

        .click-exec {
            background-color: #FF359A;
            border: 1px solid transparent;
            border-radius: 3px;
            box-shadow: rgba(255, 255, 255, .4) 0 1px 0 0 inset;
            box-sizing: border-box;
            color: #fff;
            cursor: pointer;
            display: inline-block;
            font-family: -apple-system, system-ui, "Segoe UI", "Liberation Sans", sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 1.15385;
            margin: 0;
            outline: none;
            padding: 8px .8em;
            position: relative;
            text-align: center;
            text-decoration: none;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            vertical-align: baseline;
            white-space: nowrap;
        }

        .click-exec:hover,
        .click-exec:focus {
            background-color: #FDA7DF;
        }

        .click-exec:focus {
            box-shadow: 0 0 0 4px rgba(0, 149, 255, .15);
        }

        .click-exec:active {
            background-color: #FF359A;
            box-shadow: none;
        }

        /* new add */


</style><title></title>
</head>

<div>
    <input type="text" id="username" placeholder="Username">
    <input type="text" id="ip" placeholder="IP Address">
    <button onclick="connect()">Connect</button>
</div>

<body class='typora-export'>
<div class='typora-export-content'>
    <div id='write' class=''><h3 id='0k8s集群k8s-12317）'><span>0、k8s集群（k8s-1.23.17）</span></h3>
        <p><span>docker-24.0.2 + k8s-1.23.17（最新）（kubeadm方式）（docker版）</span></p>
        <blockquote><p><span>kubeadm 方式安装 &quot;最新版&quot; k8s-1.23.17（docker容器运行时）</span></p>
            <p><span>docker-24.0.2 + k8s-1.23.17（最新）（kubeadm方式）（docker版）</span></p>
            <p><span>这里的 &quot;最新版&quot; 是指1.24之前的版本 ！！！</span></p></blockquote>
        <blockquote><p><span>k8s-1.23.17</span></p>
            <p><span>docker-24.0.2</span></p></blockquote>
        <h5 id='0环境准备centos7-环境配置调优）'><span>0、环境准备（centos7 环境配置+调优）</span></h5>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 0、centos7 环境配置</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 颜色</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">echo</span> <span class="cm-string">"PS1='\[\033[35m\][\[\033[00m\]\[\033[31m\]\u\[\033[33m\]\[\033[33m\]@\[\033[03m\]\[\033[35m\]\h\[\033[00m\] \[\033[5;32m\]\w\[\033[00m\]\[\033[35m\]]\[\033[00m\]\[\033[5;31m\]\\</span><span
                class="cm-def">$\</span><span
                class="cm-string">[\033[00m\] '"</span> &gt;&gt; ~/.bashrc &amp;&amp; <span
                class="cm-builtin">source</span> ~/.bashrc</span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
                class="cm-comment"># 安装 vim</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">yum <span
                class="cm-attribute">-y</span> install <span class="cm-builtin">vim</span> <span
                class="cm-builtin">wget</span> net-tools</span></pre></div><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># 行号</span></span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">echo</span> <span
                class="cm-string">"set nu"</span> &gt;&gt; /root/.vimrc</span></pre></div><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 搜索关键字高亮</span></span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sed</span> <span
                class="cm-attribute">-i</span> <span class="cm-string">"8calias grep='grep --color'"</span> /root/.bashrc</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span
                class="cm-comment"># 腾讯源</span></span></pre></div><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;"><span
                class="cm-builtin">wget</span> <span class="cm-attribute">-O</span> /etc/yum.repos.d/CentOS-Base.repo http://mirrors.cloud.tencent.com/repo/centos7_base.repo</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">wget</span> <span class="cm-attribute">-O</span> /etc/yum.repos.d/CentOS-Epel.repo http://mirrors.cloud.tencent.com/repo/epel-7.repo</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">yum clean all</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">yum makecache</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 506px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 506px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[0].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 369.258789px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">hostnamectl set-hostname k8s-master &amp;&amp; <span
                class="cm-builtin">su</span> <span
                class="cm-attribute">-</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[1].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 2、添加hosts解析</span></span></pre></div><pre class=" CodeMirror-line "
                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cat</span> &gt;&gt; /etc/hosts &lt;&lt; EOF</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-number">192</span>.168.1.201 k8s-master</span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-number">192</span>.168.1.202 k8s-node1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-number">192</span>.168.1.203 k8s-node2</span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 132px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 132px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[2].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 3、同步时间</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">yum <span
                class="cm-attribute">-y</span> install ntp</span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">systemctl enable ntpd <span
                class="cm-attribute">--now</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[3].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 4、永久关闭seLinux(需重启系统生效)</span></span></pre></div><pre class=" CodeMirror-line "
                                                                                          role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">setenforce <span
                class="cm-number">0</span></span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'s/SELINUX=enforcing/SELINUX=disabled/g'</span> /etc/selinux/config</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[4].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 31px; left: 100px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 5、永久关闭swap(需重启系统生效)</span></span></pre></div><div class="CodeMirror-activeline"
                                                                                       style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">swapoff <span
                class="cm-attribute">-a</span> <span class="cm-comment"># 临时关闭</span></span></pre></div><div class=""
                                                                                                             style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'s/.*swap.*/#&amp;/g'</span> /etc/fstab <span
                class="cm-comment"># 永久关闭</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[5].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 6、升级内核为5.4版本(需重启系统生效)</span></span></pre></div><pre class=" CodeMirror-line "
                                                                                         role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># https://elrepo.org/tiki/kernel-lt</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># https://elrepo.org/linux/kernel/el7/x86_64/RPMS/</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">rpm <span
                class="cm-attribute">-Uvh</span> http://www.elrepo.org/elrepo-release-7.0-6.el7.elrepo.noarch.rpm</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">yum <span
                class="cm-attribute">--disablerepo</span><span class="cm-operator">=</span><span
                class="cm-string">"*"</span> <span class="cm-attribute">--enablerepo</span><span
                class="cm-operator">=</span><span class="cm-string">"elrepo-kernel"</span> list available</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">yum <span
                class="cm-attribute">--enablerepo</span><span class="cm-operator">=</span>elrepo-kernel install <span
                class="cm-attribute">-y</span> kernel-lt</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">grub2-set-default <span
                class="cm-number">0</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 242px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 242px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[6].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment">#这里先重启再继续</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># reboot</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[7].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 7、关闭防火墙、清空iptables规则</span></span></pre></div><pre class=" CodeMirror-line "
                                                                                        role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">systemctl disable firewalld &amp;&amp; systemctl <span
                class="cm-builtin">stop</span> firewalld</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">iptables <span class="cm-attribute">-F</span> &amp;&amp; iptables <span
                class="cm-attribute">-t</span> nat <span class="cm-attribute">-F</span> &amp;&amp; iptables <span
                class="cm-attribute">-t</span> mangle <span class="cm-attribute">-F</span> &amp;&amp; iptables <span
                class="cm-attribute">-X</span> &amp;&amp; iptables <span class="cm-attribute">-P</span> FORWARD ACCEPT &amp;&amp; <span
                class="cm-builtin">service</span> iptables save</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[8].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 8、关闭 NetworkManager</span></span></pre></div><div class=""
                                                                                       style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">systemctl disable NetworkManager &amp;&amp; systemctl <span
                class="cm-builtin">stop</span> NetworkManager</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[9].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 9、加载IPVS模块</span></span></pre></div><pre class=" CodeMirror-line "
                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">yum <span class="cm-attribute">-y</span> install ipset ipvsadm</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; /etc/sysconfig/modules/ipvs.modules &lt;&lt;EOF</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">modprobe <span
                class="cm-attribute">--</span> ip_vs</span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">modprobe <span
                class="cm-attribute">--</span> ip_vs_rr</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">modprobe <span
                class="cm-attribute">--</span> ip_vs_wrr</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">modprobe <span class="cm-attribute">--</span> ip_vs_sh</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">modprobe <span
                class="cm-attribute">--</span> nf_conntrack</span></pre><pre class=" CodeMirror-line "
                                                                             role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">modprobe <span
                class="cm-attribute">--</span> nf_conntrack</span></pre><pre class=" CodeMirror-line "
                                                                             role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">chmod</span> <span
                class="cm-number">755</span> /etc/sysconfig/modules/ipvs.modules &amp;&amp; <span class="cm-builtin">bash</span> /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | <span
                class="cm-builtin">grep</span> <span class="cm-attribute">-e</span> ip_vs <span
                class="cm-attribute">-e</span> nf_conntrack</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 330px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 330px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[10].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 10、开启br_netfilter、ipv4 路由转发</span></span></pre></div><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &lt;&lt;EOF | <span class="cm-builtin">sudo</span> <span
                class="cm-builtin">tee</span> /etc/modules-load.d/k8s.conf</span></pre><pre class=" CodeMirror-line "
                                                                                            role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">overlay</span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">br_netfilter</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EOF</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-builtin">sudo</span> modprobe overlay</span></pre><pre class=" CodeMirror-line "
                                                                                 role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> modprobe br_netfilter</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># 设置所需的 sysctl 参数，参数在重新启动后保持不变</span></span></pre><pre class=" CodeMirror-line "
                                                                                          role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &lt;&lt;EOF | <span class="cm-builtin">sudo</span> <span
                class="cm-builtin">tee</span> /etc/sysctl.d/k8s.conf</span></pre><pre class=" CodeMirror-line "
                                                                                      role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.bridge.bridge-nf-call-iptables <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.bridge.bridge-nf-call-ip6tables <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4.ip_forward         <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># 应用 sysctl 参数而不重新启动</span></span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> sysctl <span
                class="cm-attribute">--system</span></span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># 查看是否生效</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">lsmod | <span class="cm-builtin">grep</span> br_netfilter</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">lsmod | <span
                class="cm-builtin">grep</span> overlay</span></pre><pre class=" CodeMirror-line "
                                                                        role="presentation"><span role="presentation"
                                                                                                  style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">sysctl net.bridge.bridge-nf-call-iptables net.bridge.bridge-nf-call-ip6tables net.ipv4.ip_forward</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 550px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 550px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[11].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 11、内核调优</span></span></pre></div><pre class=" CodeMirror-line "
                                                                           role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; /etc/sysctl.d/99-sysctl.conf &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># sysctl settings are defined through files in</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Vendors settings live in /usr/lib/sysctl.d/.</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># To override a whole file, create a new file with the same in</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># /etc/sysctl.d/ and put new settings there. To override</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># only specific settings, add a file with a lexically later</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># name in /etc/sysctl.d/ and put new settings there.</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment">#</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># For more information, see sysctl.conf(5) and sysctl.d(5).</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls IP packet forwarding</span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls source route verification</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.ipv4.conf.default.rp_filter <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Do not accept source routing</span></span></pre><pre class=" CodeMirror-line "
                                                                                          role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4.conf.default.accept_source_route <span
                class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls the System Request debugging functionality of the kernel</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls whether core dumps will append the PID to the core filename.</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># Useful for debugging multi-threaded applications.</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kernel.core_uses_pid <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls the use of TCP syncookies</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.ipv4.tcp_syncookies <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls the maximum size of a message, in bytes</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kernel.msgmnb <span
                class="cm-operator">=</span> <span class="cm-number">65536</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># Controls the default maxmimum size of a mesage queue</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kernel.msgmax <span
                class="cm-operator">=</span> <span class="cm-number">65536</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">net.ipv4.conf.all.promote_secondaries <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4.conf.default.promote_secondaries <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv6.neigh.default.gc_thresh3 <span
                class="cm-operator">=</span> <span class="cm-number">4096</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">kernel.sysrq <span
                class="cm-operator">=</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv6.conf.all<span
                class="cm-def">.disable_ipv6</span><span class="cm-operator">=</span><span
                class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv6.conf.default<span class="cm-def">.disable_ipv6</span><span
                class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "
                                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv6.conf.lo<span
                class="cm-def">.disable_ipv6</span><span class="cm-operator">=</span><span
                class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">kernel.numa_balancing <span
                class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">kernel.shmmax <span class="cm-operator">=</span> <span
                class="cm-number">68719476736</span></span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">kernel.printk <span
                class="cm-operator">=</span> <span class="cm-number">5</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.core<span
                class="cm-def">.rps_sock_flow_entries</span><span class="cm-operator">=</span><span class="cm-number">8192</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.bridge<span
                class="cm-def">.bridge-nf-call-ip6tables</span><span class="cm-operator">=</span><span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4<span
                class="cm-def">.ip_local_reserved_ports</span><span class="cm-operator">=</span><span class="cm-number">60001</span>,60002</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.core<span
                class="cm-def">.rmem_max</span><span class="cm-operator">=</span><span class="cm-number">16777216</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">fs.inotify<span
                class="cm-def">.max_user_watches</span><span class="cm-operator">=</span><span
                class="cm-number">524288</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">kernel<span class="cm-def">.core_pattern</span><span
                class="cm-operator">=</span>core</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.core<span
                class="cm-def">.dev_weight_tx_bias</span><span class="cm-operator">=</span><span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4<span
                class="cm-def">.tcp_max_orphans</span><span class="cm-operator">=</span><span
                class="cm-number">32768</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">kernel<span class="cm-def">.pid_max</span><span
                class="cm-operator">=</span><span class="cm-number">4194304</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kernel<span
                class="cm-def">.softlockup_panic</span><span class="cm-operator">=</span><span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">fs<span class="cm-def">.file-max</span><span
                class="cm-operator">=</span><span class="cm-number">3355443</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.core<span
                class="cm-def">.bpf_jit_harden</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.ipv4<span
                class="cm-def">.tcp_max_tw_buckets</span><span class="cm-operator">=</span><span
                class="cm-number">32768</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">fs.inotify<span
                class="cm-def">.max_user_instances</span><span class="cm-operator">=</span><span
                class="cm-number">8192</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.core<span
                class="cm-def">.bpf_jit_kallsyms</span><span class="cm-operator">=</span><span
                class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">vm<span class="cm-def">.max_map_count</span><span
                class="cm-operator">=</span><span class="cm-number">262144</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kernel<span
                class="cm-def">.threads-max</span><span class="cm-operator">=</span><span
                class="cm-number">262144</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.core<span
                class="cm-def">.bpf_jit_enable</span><span class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.ipv4<span
                class="cm-def">.tcp_keepalive_time</span><span class="cm-operator">=</span><span
                class="cm-number">600</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4<span class="cm-def">.tcp_wmem</span><span
                class="cm-operator">=</span><span class="cm-number">4096</span> <span class="cm-number">12582912</span>  <span
                class="cm-number">16777216</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.core<span class="cm-def">.wmem_max</span><span
                class="cm-operator">=</span><span class="cm-number">16777216</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.ipv4.neigh.default<span
                class="cm-def">.gc_thresh1</span><span class="cm-operator">=</span><span
                class="cm-number">2048</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.core<span class="cm-def">.somaxconn</span><span
                class="cm-operator">=</span><span class="cm-number">32768</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">net.ipv4.neigh.default<span
                class="cm-def">.gc_thresh3</span><span class="cm-operator">=</span><span
                class="cm-number">8192</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4<span class="cm-def">.ip_forward</span><span
                class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4.neigh.default<span
                class="cm-def">.gc_thresh2</span><span class="cm-operator">=</span><span
                class="cm-number">4096</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4<span
                class="cm-def">.tcp_max_syn_backlog</span><span class="cm-operator">=</span><span
                class="cm-number">8096</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.bridge<span class="cm-def">.bridge-nf-call-iptables</span><span
                class="cm-operator">=</span><span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "
                                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">net.ipv4<span class="cm-def">.tcp_rmem</span><span
                class="cm-operator">=</span><span class="cm-number">4096</span> <span
                class="cm-number">12582912</span>    <span
                class="cm-number">16777216</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-comment"># 应用 sysctl 参数而不重新启动</span></span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">sudo</span> sysctl <span
                class="cm-attribute">--system</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1760px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 1760px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[12].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"
             style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap"
                                               lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 12、设置资源配置文件</span></span></pre></div><pre class=" CodeMirror-line "
                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cat</span> &gt;&gt; /etc/security/limits.conf &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">* soft nofile <span
                class="cm-number">100001</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">* hard nofile <span
                class="cm-number">100002</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">root soft nofile <span class="cm-number">100001</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">root hard nofile <span
                class="cm-number">100002</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">* soft memlock unlimited</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">* hard memlock unlimited</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">* soft nproc <span
                class="cm-number">254554</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">* hard nproc <span
                class="cm-number">254554</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">* soft sigpending <span
                class="cm-number">254554</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">* hard sigpending <span
                class="cm-number">254554</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"> </span></pre><pre class=" CodeMirror-line "
                                                                                     role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">grep</span> <span
                class="cm-attribute">-vE</span> <span class="cm-string">"^\s*#"</span> /etc/security/limits.conf</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"> </span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">ulimit <span
                class="cm-attribute">-a</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 374px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 374px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[13].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <h5 id='1安装-docker-2402腾讯源）'><span>1、安装 docker-24.0.2（腾讯源）</span></h5>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">wget</span> <span class="cm-attribute">-O</span> /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'s+download.docker.com+mirrors.cloud.tencent.com/docker-ce+'</span> /etc/yum.repos.d/docker-ce.repo</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation"
                style="padding-right: 0.1px;">yum makecache fast</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 154px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 154px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[14].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">yum list docker-ce <span
                class="cm-attribute">--showduplicates</span> | <span class="cm-builtin">sort</span> <span
                class="cm-attribute">-r</span></span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;">yum list docker-ce-cli <span
                class="cm-attribute">--showduplicates</span> | <span class="cm-builtin">sort</span> <span
                class="cm-attribute">-r</span></span></pre><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">yum list containerd.io <span
                class="cm-attribute">--showduplicates</span> | <span class="cm-builtin">sort</span> <span
                class="cm-attribute">-r</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 66px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 66px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[15].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">yum <span
                class="cm-attribute">-y</span> install docker-ce-24.0.2-1.el7 docker-ce-cli-24.0.2-1.el7 containerd.io-1.6.9-3.1.el7</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">systemctl enable docker <span class="cm-attribute">--now</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[16].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false"
             lang="shell" style="break-inside: unset;"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 119px; left: 226.421875px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; /etc/docker/daemon.json &lt;&lt; <span
                class="cm-string">'EOF'</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line "
                                                                                     role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"> <span class="cm-string">"registry-mirrors"</span>: [</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-string">"https://mirror.ccs.tencentyun.com"</span></span></pre><pre class=" CodeMirror-line "
                                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  ],</span></pre><div class="CodeMirror-activeline"
                                                                                        style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span
                class="cm-string">"insecure-registries"</span>: [</span></pre></div><div class=""
                                                                                         style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-string">"https://harbor.huanghuanhui.cloud"</span></span></pre></div><div class=""
                                                                                                    style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;">  ],</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span
                class="cm-string">"exec-opts"</span>: [</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  <span class="cm-string">"native.cgroupdriver=systemd"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;">  ],</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span
                class="cm-string">"log-driver"</span>: <span class="cm-string">"json-file"</span>,</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span
                class="cm-string">"log-opts"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  <span
                class="cm-string">"max-size"</span>: <span class="cm-string">"100m"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;">  },</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span
                class="cm-string">"storage-driver"</span>: <span class="cm-string">"overlay2"</span>,</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span
                class="cm-string">"data-root"</span>: <span class="cm-string">"/var/lib/docker"</span></span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">}</span></pre></div><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><div class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">systemctl daemon-reload &amp;&amp; systemctl <span
                class="cm-builtin">restart</span> docker</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 462px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 462px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[17].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <h5 id='2安装k8skubeadm-12317kubelet-12317kubectl-12317）清华源）'><span>2、安装k8s（kubeadm-1.23.17、kubelet-1.23.17、kubectl-1.23.17）（清华源）</span>
        </h5>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">cat</span> &gt; /etc/yum.repos.d/kubernetes.repo &lt;&lt;EOF</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[kubernetes]</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span class="cm-def">name</span><span
                class="cm-operator">=</span>kubernetes</span></pre><pre class=" CodeMirror-line "
                                                                        role="presentation"><span role="presentation"
                                                                                                  style="padding-right: 0.1px;"><span
                class="cm-def">baseurl</span><span class="cm-operator">=</span>https://mirrors.tuna.tsinghua.edu.cn/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></pre><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-def">enabled</span><span
                class="cm-operator">=</span><span class="cm-number">1</span></span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span class="cm-def">gpgcheck</span><span
                class="cm-operator">=</span><span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "
                                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">EOF</span></pre><div class=""
                                                                                       style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span cm-text=""
                                                                                                        cm-zwsp="">
</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;">yum <span
                class="cm-attribute">-y</span> install kubeadm-1.23.17-0 kubelet-1.23.17-0 kubectl-1.23.17-0</span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                   style="padding-right: 0.1px;">systemctl enable <span
                class="cm-attribute">--now</span> kubelet</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 264px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 264px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[18].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <h5 id='3初始化-k8s-12317-集群'><span>3、初始化 k8s-1.23.17 集群</span></h5>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false"
             lang="yaml" style="break-inside: unset;"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="yaml"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 1021px; left: 251.639648px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">mkdir ~/kubeadm_init &amp;&amp; cd ~/kubeadm_init</span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">kubeadm config print init-defaults &gt; kubeadm-init.yaml</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">cat &gt; ~/kubeadm_init/kubeadm-init.yaml &lt;&lt; EOF</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">apiVersion</span><span class="cm-meta">: </span>kubeadm.k8s.io/v1beta2</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">bootstrapTokens</span><span class="cm-meta">:</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-meta">- </span><span class="cm-atom">groups</span><span class="cm-meta">:</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-meta">  - </span>system:bootstrappers:kubeadm:default-node-token</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">  token</span><span class="cm-meta">: </span>abcdef.0123456789abcdef</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">  ttl</span><span class="cm-meta">: </span>24h0m0s</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">  usages</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">  - </span>signing</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-meta">  - </span>authentication</span></pre><pre class=" CodeMirror-line "
                                                                           role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                class="cm-atom">kind</span><span class="cm-meta">: </span>InitConfiguration</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">localAPIEndpoint</span><span class="cm-meta">:</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">  advertiseAddress</span><span class="cm-meta">: </span>192.168.1.201 <span
                class="cm-comment"># 修改自己的ip</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  bindPort</span><span
                class="cm-meta">: </span><span class="cm-number">6443</span></span></pre><pre class=" CodeMirror-line "
                                                                                              role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">nodeRegistration</span><span
                class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  criSocket</span><span
                class="cm-meta">: </span>/var/run/dockershim.sock</span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  name</span><span
                class="cm-meta">: </span>k8s-master</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  taints</span><span
                class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">  - </span><span class="cm-atom">effect</span><span
                class="cm-meta">: </span><span class="cm-string">"NoSchedule"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">    key</span><span class="cm-meta">: </span><span class="cm-string">"node-role.kubernetes.io/k8s-master"</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-def">---</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">apiServer</span><span
                class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  timeoutForControlPlane</span><span
                class="cm-meta">: </span>4m0s</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">apiVersion</span><span
                class="cm-meta">: </span>kubeadm.k8s.io/v1beta2</span></pre><pre class=" CodeMirror-line "
                                                                                 role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">certificatesDir</span><span
                class="cm-meta">: </span>/etc/kubernetes/pki</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">clusterName</span><span
                class="cm-meta">: </span>kubernetes</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">controllerManager</span><span
                class="cm-meta">: {}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">dns</span><span
                class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  type</span><span
                class="cm-meta">: </span>CoreDNS</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">etcd</span><span
                class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  local</span><span class="cm-meta">:</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">   dataDir</span><span class="cm-meta">: </span>/var/lib/etcd</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">imageRepository</span><span class="cm-meta">: </span>registry.aliyuncs.com/google_containers</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">kind</span><span class="cm-meta">: </span>ClusterConfiguration</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">kubernetesVersion</span><span class="cm-meta">: </span>v1.23.17</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">networking</span><span class="cm-meta">:</span></span></pre><pre class=" CodeMirror-line "
                                                                                                 role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  dnsDomain</span><span
                class="cm-meta">: </span>cluster.local</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  serviceSubnet</span><span
                class="cm-meta">: </span>10.96.0.0/12</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-atom">  podSubnet</span><span
                class="cm-meta">: </span>10.244.0.0/16 </span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
                class="cm-atom">scheduler</span><span class="cm-meta">: {}</span></span></pre><pre class=" CodeMirror-line "
                                                                                                   role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-def">---</span> </span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">apiVersion</span><span
                class="cm-meta">: </span>kubeproxy.config.k8s.io/v1alpha1</span></pre><div class="CodeMirror-activeline"
                                                                                           style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">kind</span><span class="cm-meta">: </span>KubeProxyConfiguration </span></pre></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">mode</span><span class="cm-meta">: </span>ipvs </span></pre><pre class=" CodeMirror-line "
                                                                                                 role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-def">---</span> </span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">apiVersion</span><span class="cm-meta">: </span>kubelet.config.k8s.io/v1beta1</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">kind</span><span class="cm-meta">: </span>KubeletConfiguration </span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-atom">cgroupDriver</span><span class="cm-meta">: </span>systemd</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;">EOF</span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1166px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 1166px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[19].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment">#预拉取镜像</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubeadm config images pull <span
                class="cm-attribute">--config</span> kubeadm-init.yaml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[20].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 初始化</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubeadm init <span
                class="cm-attribute">--config</span><span class="cm-operator">=</span>kubeadm-init.yaml | <span
                class="cm-builtin">tee</span> kubeadm-init.log</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 44px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 44px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[21].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 配置 kubectl</span></span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">mkdir</span> <span class="cm-attribute">-p</span> <span class="cm-def">$HOME</span>/.kube</span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sudo</span> <span
                class="cm-builtin">cp</span> <span class="cm-attribute">-i</span> /etc/kubernetes/admin.conf <span
                class="cm-def">$HOME</span>/.kube/config</span></pre></div><div class="" style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">sudo</span> <span class="cm-builtin">chown</span> <span
                class="cm-quote">$(id -u)</span>:<span class="cm-quote">$(id -g)</span> <span
                class="cm-def">$HOME</span>/.kube/config</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[22].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <h5 id='4安装-k8s-集群网络calico）'><span>4、安装 k8s 集群网络（calico）</span></h5>
        <p><span>查看calico与k8s的版本对应关系</span></p>
        <blockquote><p><a href='https://docs.tigera.io/archive/v3.25/getting-started/kubernetes/requirements'
                          target='_blank' class='url'>https://docs.tigera.io/archive/v3.25/getting-started/kubernetes/requirements</a>
        </p></blockquote>
        <blockquote><p><span>这里k8s-1.23.17，所以使用calico-v3.25.1版本（版本对应很关键）</span></p></blockquote>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false"
             lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 108px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-builtin">mkdir</span> <span class="cm-attribute">-p</span> ~/calico-yml</span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
                class="cm-builtin">cd</span> ~/calico-yml &amp;&amp; <span class="cm-builtin">wget</span> https://github.com/projectcalico/calico/raw/v3.25.1/manifests/calico.yaml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[23].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false"
             lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 251px; left: 352.40625px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div
                class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div
                style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-number">1</span> 修改CIDR</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-attribute">-</span> name: CALICO_IPV4POOL_CIDR</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  value: <span
                class="cm-string">"10.244.0.0/16"</span></span></pre><pre class=" CodeMirror-line "
                                                                          role="presentation"><span role="presentation"
                                                                                                    style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;"><span
                class="cm-number">2</span> 指定网卡</span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Cluster type to identify the deployment type</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span
                class="cm-attribute">-</span> name: CLUSTER_TYPE</span></pre><pre class=" CodeMirror-line "
                                                                                  role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">  value: <span
                class="cm-string">"k8s,bgp"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># 下面添加</span></span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span
                class="cm-attribute">-</span> name: IP_AUTODETECTION_METHOD</span></pre><pre class=" CodeMirror-line "
                                                                                             role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"> &nbsp;  value: <span
                class="cm-string">"interface=ens33"</span></span></pre><div class="CodeMirror-activeline"
                                                                            style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span
                class="cm-comment"># ens33为本地网卡名字（自己机器啥网卡就改啥</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 264px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 264px;"></div></div></div></pre>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div
                class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll"
                                                                                  tabindex="-1"><div
                class="CodeMirror-sizer"
                style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter"
                style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span
                class="cm-comment"># 1 修改CIDR</span></span></pre></div><div class=""
                                                                            style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                    style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'s/192\.168/10\.244/g'</span> calico.yaml</span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'s/# \(- name: CALICO_IPV4POOL_CIDR\)/\1/'</span> calico.yaml</span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">sed</span> <span
                class="cm-attribute">-i</span> <span
                class="cm-string">'s/# \(\s*value: "10.244.0.0\/16"\)/\1/'</span> calico.yaml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 110px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 110px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[25].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false"
             lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 53px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line "
                                                                          role="presentation"><span role="presentation"
                                                                                                    style="padding-right: 0.1px;"><span
                class="cm-comment"># 2 指定网卡（ens33为本地网卡名字（自己机器啥网卡就改啥））</span></span></pre><div class=""
                                                                                              style="position: relative;"><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'/value: "k8s,bgp"/a \            - name: IP_AUTODETECTION_METHOD'</span> \calico.yaml</span></pre></div><div
                class="CodeMirror-activeline" style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre></div><div class="" style="position: relative;"><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
                class="cm-builtin">sed</span> <span class="cm-attribute">-i</span> <span class="cm-string">'/- name: IP_AUTODETECTION_METHOD/a \              value: "interface=ens33"'</span> \calico.yaml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 88px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 88px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[26].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div
                class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll"
                                                                                  tabindex="-1"><div
                class="CodeMirror-sizer"
                style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter"
                style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">kubectl apply <span
                class="cm-attribute">-f</span> ~/calico-yml/calico.yaml</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[27].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <h5 id='5coredns-解析测试是否正常'><span>5、coredns 解析测试是否正常</span></h5>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">[root@k8s-master ~]<span
                class="cm-comment"># kubectl run -it --rm dns-test --image=busybox:1.28.4 sh</span></span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">If you don<span class="cm-string">'t see a command prompt, try pressing enter.</span></span></pre></div><div
                class="" style="position: relative;"><pre class=" CodeMirror-line " role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">/ <span
                class="cm-comment"># nslookup kubernetes</span></span></pre></div><pre class=" CodeMirror-line "
                                                                                       role="presentation"><span
                role="presentation" style="padding-right: 0.1px;">Server:  <span class="cm-number">10</span>.96.0.10</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Address <span
                class="cm-number">1</span>: <span class="cm-number">10</span>.96.0.10 kube-dns.kube-system.svc.cluster.local  <span
                class="cm-comment"># 看到这个说明dns解析正常</span></span></pre><pre class=" CodeMirror-line "
                                                                           role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
                cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                             style="padding-right: 0.1px;">Name:    kubernetes</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Address <span
                class="cm-number">1</span>: <span class="cm-number">10</span>.96.0.1 kubernetes.default.svc.cluster.local</span></pre><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/ <span
                class="cm-comment">#</span></span></pre></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 220px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 220px;"></div></div></div></pre>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded md-focus" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap CodeMirror-focused" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                          style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">kubectl run <span
                class="cm-attribute">-it</span> <span class="cm-attribute">--rm</span> dns-test <span
                class="cm-attribute">--image</span><span class="cm-operator">=</span>busybox:1.28.4 <span
                class="cm-builtin">sh</span></span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[29].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="shell"><div
                class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="shell"><div
                style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9px; left: 8px;"><textarea
                autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
                style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
                class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                     cm-not-content="true"></div><div
                class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                             style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
                style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
                role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
                class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
                class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline"
                                                                 style="position: relative;"><div
                class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
                class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
                class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">nslookup kubernetes</span></pre></div></div></div></div></div></div><div
                style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 22px;"></div><div
                class="CodeMirror-gutters" style="display: none; height: 22px;"></div></div></div></pre>
        <button onclick="executeCommand(this, document.querySelectorAll('.CodeMirror-code')[30].innerText.trim())" onmouseover="showExecTip(this);" onmouseout="hideExecTip(this);" class="click-exec">执行命令</button>
        <hr>
        <h3></h3></div>
</div>

<!-- 添加更多按钮 -->
</p >
<div id="terminal"></div> <!-- 用于显示xterm.js终端的元素 -->

<script>
    const term = new Terminal({
        cursorBlink: true, // 光标闪烁
        rows: parseInt(50),
        cols: parseInt(150),
    });

    term.open(document.querySelector('#terminal')); // 挂载

    const socket = new WebSocket(`wss://devops.huanghuanhui.com/ws`); // 创建WebSocket连接
    term.onData((data) => { // 网页xterm窗口中有输入的数据
        socket.send(data); // 通过WebSocket发送给服务器
    });

    socket.onmessage = (event) => { // 收到来自服务器的WebSocket消息
        term.write(event.data); // 向xterm对象写入数据
    };

  function connect() {
      var usernameInput = document.getElementById("username");
      var ipInput = document.getElementById("ip");
      var username = usernameInput.value;
      var ip = ipInput.value;
      var connectMsg = JSON.stringify({
          "username": username,
          "ip": ip
      });
      socket.send(connectMsg);
  }


    function sendMessage(message) {

        message += '\r'; // 添加回车符
        socket.send(message); // 发送命令
    }

    // 显示按钮下方的提示(鼠标悬停时显示)
    function showExecTip(button) {
        const execTip = button.nextElementSibling;
        execTip.style.display = 'inline';
    }

    // 隐藏按钮下方的提示(鼠标移开时隐藏)
    function hideExecTip(button) {
        const execTip = button.nextElementSibling;
        execTip.style.display = 'none';
    }

    // 执行命令并显示提示
    function executeCommand(button, command) {
        console.log(command)
        sendMessage(command);
        showExecTip(button);
    }
</script>
</body>

</html>
